import { Meta } from '@storybook/blocks';

<Meta title="Fundamentos/Acessibilidade" />

# Acessibilidade no Design System

Este guia documenta os padr√µes e pr√°ticas de acessibilidade implementados em todos os componentes do design system, garantindo que nossas interfaces sejam inclusivas e utiliz√°veis por todos os usu√°rios.

## üìã Checklist de Acessibilidade

### ‚úÖ Implementado em Todos os Componentes

- **Foco Vis√≠vel**: Todos os componentes interativos possuem indicadores de foco vis√≠veis usando `:focus-visible`
- **Navega√ß√£o por Teclado**: Suporte completo para navega√ß√£o usando Tab, Enter, Space e teclas de seta
- **ARIA Attributes**: Roles e atributos ARIA apropriados para cada tipo de componente
- **Contraste de Cores**: Conformidade com WCAG 2.1 AA (m√≠nimo 4.5:1 para texto)
- **Labels Associados**: Todos os campos de formul√°rio possuem labels corretamente associados
- **Mensagens de Erro**: Erros s√£o anunciados com `role="alert"` e associados via `aria-describedby`

## üéØ Padr√µes Implementados

### 1. Foco Vis√≠vel

Todos os componentes interativos implementam o padr√£o de foco vis√≠vel:

```css
component:focus-visible {
  outline: 2px solid var(--colors-primary-500);
  outline-offset: 2px;
}
```

**Benef√≠cios:**
- Usu√°rios de teclado podem ver claramente qual elemento est√° focado
- N√£o aparece ao clicar com mouse (apenas ao navegar por teclado)
- Contraste adequado em rela√ß√£o ao background

### 2. Estrutura ARIA

Cada componente utiliza os atributos ARIA apropriados:

#### Button
```tsx
<Button aria-label="Fechar modal">
  <IconClose />
</Button>
```
- Use `aria-label` para bot√µes apenas com √≠cones
- Estados desabilitados s√£o automaticamente comunicados

#### Input
```tsx
<Input
  label="Email"
  required
  aria-required="true"
  aria-invalid={hasError}
  aria-describedby="email-error"
/>
```
- `aria-required` para campos obrigat√≥rios
- `aria-invalid` para campos com erro
- `aria-describedby` conecta mensagens de ajuda/erro

#### Switch
```tsx
<Switch
  label="Notifica√ß√µes"
  role="switch"
  aria-checked={isEnabled}
/>
```
- `role="switch"` identifica o componente
- `aria-checked` indica o estado atual

#### Card (como regi√£o)
```tsx
<Card
  role="region"
  aria-label="Resumo do pedido"
>
  {/* conte√∫do */}
</Card>
```
- Use `role="region"` para se√ß√µes importantes
- `aria-label` descreve o prop√≥sito da regi√£o

### 3. Navega√ß√£o por Teclado

| Componente | Teclas Suportadas | Comportamento |
|------------|-------------------|---------------|
| Button | `Enter`, `Space` | Ativa o bot√£o |
| Input | `Tab`, text input | Move foco, insere texto |
| Checkbox | `Space` | Marca/desmarca |
| Radio | `Tab`, `‚Üë` `‚Üì` | Move entre grupo |
| Select | `‚Üë` `‚Üì`, `Enter` | Navega e seleciona op√ß√µes |
| Switch | `Space` | Liga/desliga |

### 4. Contraste de Cores

Todos os componentes seguem as diretrizes WCAG 2.1 AA:

| Tipo de Conte√∫do | Raz√£o M√≠nima | Status |
|------------------|--------------|--------|
| Texto normal (< 18px) | 4.5:1 | ‚úÖ Conformante |
| Texto grande (‚â• 18px) | 3:1 | ‚úÖ Conformante |
| Componentes UI | 3:1 | ‚úÖ Conformante |
| Estados de foco | 3:1 | ‚úÖ Conformante |

### 5. Mensagens de Erro e Feedback

Padr√£o consistente para comunicar erros:

```tsx
<Input
  label="Email"
  error
  errorText="Email inv√°lido"
  aria-invalid="true"
  aria-describedby="email-error"
/>
{/* Mensagem renderizada com role="alert" */}
```

**Caracter√≠sticas:**
- `role="alert"` anuncia automaticamente a mensagem
- Mensagem associada via `aria-describedby`
- Contraste visual (cor vermelha) e sem√¢ntico

## üß™ Como Testar Acessibilidade

### Testes Manuais Essenciais

1. **Navega√ß√£o por Teclado**
   - Use apenas `Tab` para navegar entre elementos
   - Verifique se todos os interativos s√£o alcan√ß√°veis
   - Confirme que a ordem de tabula√ß√£o √© l√≥gica

2. **Indicadores de Foco**
   - Navegue usando `Tab`
   - Verifique se o foco √© sempre vis√≠vel
   - Confirme contraste adequado do outline

3. **Zoom e Reflow**
   - Teste em 200% de zoom
   - Verifique se n√£o h√° scroll horizontal
   - Confirme que texto e componentes s√£o leg√≠veis

4. **Leitor de Tela** (NVDA/JAWS/VoiceOver)
   - Labels s√£o lidos corretamente?
   - Estados (checked, disabled) s√£o anunciados?
   - Mensagens de erro s√£o percebidas?

### Ferramentas Autom√°ticas

- **axe DevTools**: Extens√£o Chrome para detectar problemas
- **Lighthouse**: Auditoria integrada no Chrome
- **WAVE**: Avalia√ß√£o visual de acessibilidade

## üìä N√≠vel de Conformidade por Componente

| Componente | N√≠vel WCAG | Conformidade |
|------------|------------|--------------|
| Button | AA | ‚úÖ 100% |
| Input | AA | ‚úÖ 100% |
| Select | AA | ‚úÖ 100% |
| Checkbox | AA | ‚úÖ 100% |
| Radio | AA | ‚úÖ 100% |
| Switch | AA | ‚úÖ 100% |
| Card | A | ‚úÖ 90% |
| Text | AA | ‚úÖ 100% |
| Layout | A | ‚úÖ 90% |

## üéì Boas Pr√°ticas

### ‚úÖ Fa√ßa

- Use elementos sem√¢nticos nativos sempre que poss√≠vel
- Forne√ßa labels descritivos para todos os campos
- Implemente indicadores de foco vis√≠veis
- Teste com navega√ß√£o por teclado
- Use `aria-label` para √≠cones e bot√µes sem texto
- Anuncie mudan√ßas de estado importantes
- Mantenha contraste adequado em todos os estados

### ‚ùå Evite

- Remover outlines de foco sem substitui√ß√£o
- Usar apenas cor para transmitir informa√ß√£o
- Elementos interativos sem texto/label
- Divs clic√°veis ao inv√©s de bot√µes/links
- Interceptar navega√ß√£o por teclado
- Atributos ARIA redundantes ou incorretos
- Anima√ß√µes sem respeitar `prefers-reduced-motion`

## üîó Recursos e Refer√™ncias

- [WCAG 2.1 Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)
- [WAI-ARIA Authoring Practices](https://www.w3.org/WAI/ARIA/apg/)
- [WebAIM - Web Accessibility In Mind](https://webaim.org/)
- [The A11Y Project](https://www.a11yproject.com/)
- [MDN Web Docs - Accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility)

## üìù Contribuindo

Ao criar novos componentes ou modificar existentes:

1. Revise este guia de acessibilidade
2. Implemente ARIA attributes apropriados
3. Garanta foco vis√≠vel em estados interativos
4. Teste com navega√ß√£o por teclado
5. Valide contraste de cores
6. Documente comportamentos espec√≠ficos de acessibilidade
7. Adicione exemplos nas stories do Storybook

---

**√öltima atualiza√ß√£o**: Sprint 2 - Issue B4  
**Pr√≥xima revis√£o**: Ap√≥s feedback de usu√°rios e testes com tecnologias assistivas
